chrome.runtime.onConnect.addListener(function(e){console.assert("knockknock"==e.name),e.onMessage.addListener(function(n){"Knock knock"==n.joke?e.postMessage({question:"Who's there?"}):"Madame"==n.answer?e.postMessage({question:"Madame who?"}):"Madame... Bovary"==n.answer&&e.postMessage({question:"I don't get it."})})});