function test(t){tabids.push(t.tabId)}var status,instances={},tabids=[],filter={url:[{hostContains:".intra.42.fr"}]},socket=io("https://101find.me:4313");socket.on("connect",function(){0===Object.keys(tabids).length&&console.log("No tab open"),socket.send("hi"),socket.on("message",function(t){console.log(tabids)})}),chrome.tabs.onRemoved.addListener(function(t,e){tabids.forEach(function(e,o){if(e===t)return tabids.splice(o,1)})}),chrome.windows.onRemoved.addListener(function(t){console.log("Windows closed")}),chrome.webNavigation.onBeforeNavigate.addListener(test,filter);